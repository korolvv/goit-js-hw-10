{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst myInput = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('[data-start]');\n\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nconst fields = { days, hours, minutes, seconds };\nconst currentDate = Date.now();\n\nconst options = {\n  enableTime: true,\n  dateFormat: 'Y-m-d H:i',\n  time_24hr: true,\n  defaultDate: currentDate,\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0].getTime();\n    falseTime(userSelectedDate, currentDate);\n  },\n};\n\nfunction falseTime(selected, current) {\n  if (selected < current) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n  } else {\n    btnStart.removeAttribute('disabled');\n  }\n}\n\nlet userSelectedDate = 0;\nconst fp = flatpickr(myInput, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nbtnStart.addEventListener('click', e => {\n  e.target.setAttribute('disabled', 'disabled');\n  myInput.setAttribute('disabled', 'disabled');\n  updateTimer();\n});\n\nfunction addLeadingZero(value) {\n  value = String(value).padStart(2, '0');\n  return value;\n}\n\nfunction updateTimer() {\n  setInterval(() => {\n    let diff = userSelectedDate - Date.now();\n    if (diff >= 0) {\n      let datesArr = convertMs(diff);\n      for (const field in fields) {\n        for (const key in datesArr) {\n          if (field === key) {\n            const value = addLeadingZero(datesArr[key]);\n            fields[field].innerHTML = `${value}`;\n            break;\n          }\n        }\n      }\n    } else {\n      btnStart.removeAttribute('disabled');\n      myInput.removeAttribute('disabled');\n    }\n  }, 1000);\n}\n"],"names":["myInput","btnStart","days","hours","minutes","seconds","fields","currentDate","options","selectedDates","userSelectedDate","falseTime","selected","current","iziToast","flatpickr","convertMs","ms","e","updateTimer","addLeadingZero","value","diff","datesArr","field","key"],"mappings":"2GAQA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,cAAc,EAEhDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAS,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EACxCE,EAAc,KAAK,MAEnBC,EAAU,CACd,WAAY,GACZ,WAAY,YACZ,UAAW,GACX,YAAaD,EACb,gBAAiB,EACjB,QAAQE,EAAe,CACrBC,EAAmBD,EAAc,CAAC,EAAE,QAAO,EAC3CE,EAAUD,EAAkBH,CAAW,CACxC,CACH,EAEA,SAASI,EAAUC,EAAUC,EAAS,CAChCD,EAAWC,EACbC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,oCACf,CAAK,EAEDb,EAAS,gBAAgB,UAAU,CAEvC,CAEA,IAAIS,EAAmB,EACZK,EAAUf,EAASQ,CAAO,EAErC,SAASQ,EAAUC,EAAI,CAMrB,MAAMf,EAAO,KAAK,MAAMe,EAAK,KAAG,EAC1Bd,EAAQ,KAAK,MAAOc,EAAK,MAAO,IAAI,EACpCb,EAAU,KAAK,MAAQa,EAAK,MAAO,KAAQ,GAAM,EACjDZ,EAAU,KAAK,MAASY,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAf,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEAJ,EAAS,iBAAiB,QAASiB,GAAK,CACtCA,EAAE,OAAO,aAAa,WAAY,UAAU,EAC5ClB,EAAQ,aAAa,WAAY,UAAU,EAC3CmB,GACF,CAAC,EAED,SAASC,EAAeC,EAAO,CAC7B,OAAAA,EAAQ,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAC9BA,CACT,CAEA,SAASF,GAAc,CACrB,YAAY,IAAM,CAChB,IAAIG,EAAOZ,EAAmB,KAAK,IAAG,EACtC,GAAIY,GAAQ,EAAG,CACb,IAAIC,EAAWP,EAAUM,CAAI,EAC7B,UAAWE,KAASlB,EAClB,UAAWmB,KAAOF,EAChB,GAAIC,IAAUC,EAAK,CACjB,MAAMJ,EAAQD,EAAeG,EAASE,CAAG,CAAC,EAC1CnB,EAAOkB,CAAK,EAAE,UAAY,GAAGH,CAAK,GAClC,KACD,CAGX,MACMpB,EAAS,gBAAgB,UAAU,EACnCD,EAAQ,gBAAgB,UAAU,CAErC,EAAE,GAAI,CACT"}